(window.webpackJsonpwebapp=window.webpackJsonpwebapp||[]).push([[0],{100:function(e,t,a){},131:function(e,t){},173:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(16),o=a.n(s),c=(a(86),a(28)),i=a(29),l=a(31),u=a(30),m=a(32),d=(a(87),a(186)),h=a(19),p=a(174),w=a(175),y=a(176),b=a(177),v=a(178),f=a(179),E=a(180),k=a(181),M=a(182),g=a(187),S=a(188),N=a(183),C=a(184),B=a(185),j=a(73),x=a(42),O=a.n(x),R=a(43),I=a(17);a(100);function _(e){return r.a.createElement("div",{className:"news-card-score-overlay"},r.a.createElement(D,{className:e.className,statusColour:e.statusColour,onStatusButtonClicked:e.onStatusButtonClicked,statusIcon:e.statusIcon,honestyMetric:e.honestyMetric}))}function D(e){var t="shadow"in e&&e.shadow?"shadow":"";return r.a.createElement(p.a,{size:"md",style:{background:e.statusColour,borderColor:e.statusColour},className:"news-card-score-button "+t+" "+e.className,onClick:e.onStatusButtonClicked,id:e.id},r.a.createElement("div",{className:"w-100 h-100 align-self-center"},r.a.createElement(R.a,{icon:e.statusIcon,className:"mr-2"}),r.a.createElement("strong",null,e.honestyMetric)))}function H(e){var t=I.d;return e>=90&&(t=I.f),e<90&&e>=70?t=I.e:e<70&&e>=40?t=I.b:e<40&&e>=20&&(t=I.a),t}function Y(e){return"image"in e&&null!=e.image?r.a.createElement(w.a,{src:e.image.source,alt:e.image.alt,className:"card-img-top card-thumbnail"}):null}var z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={rateSurveyModal:!1,showMetricBreakdown:!1},a.onCardClick=a.onCardClick.bind(Object(h.a)(a)),a.onStatusButtonClicked=a.onStatusButtonClicked.bind(Object(h.a)(a)),a.showSurveyModal=a.showSurveyModal.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onCardClick",value:function(){window.open(this.props.url,"_blank")}},{key:"onStatusButtonClicked",value:function(){this.setState({showMetricBreakdown:!this.state.showMetricBreakdown})}},{key:"showSurveyModal",value:function(){this.setState(function(e){return{rateSurveyModal:!e.rateSurveyModal}})}},{key:"render",value:function(){var e,t=this.props.honestyMetric/100;e=this.props.honestyMetric<=50?O()(["#d9534f","#f0ad4e"])(2*t):O()(["#f0ad4e","#50a847","#28a745"])(t/2);var a=H(this.props.honestyMetric),n=H(this.props.userHonestyMetric),s=this.state.showMetricBreakdown?"animate-ripple":"",o=this.state.showMetricBreakdown?"block-events":"",c=this.state.showMetricBreakdown?"animate-metric-breakdown-content":"",i=this.state.showMetricBreakdown?"animate-user-metric-status":"",l=this.state.showMetricBreakdown?"animate-rate-button":"",u=this.props.breakdownFactors.map(function(e){return r.a.createElement(y.a,{md:"6",className:"pl-0",key:e.name},r.a.createElement("div",{className:"text-left"},e.name),r.a.createElement(b.a,{value:e.value,max:"100"}))});return r.a.createElement(v.a,{className:"news-card shadow border-0"},r.a.createElement(f.a,null,r.a.createElement(y.a,{md:"9",className:"order-12"},r.a.createElement(E.a,{className:"callout "+o,style:{borderLeftColor:e}},r.a.createElement("strong",{className:"mb-2 text-secondary"},this.props.source.name),r.a.createElement(k.a,{className:"news-card-title mb-0 w-100",tag:"h3",onClick:this.onCardClick},this.props.title),r.a.createElement(M.a,{tag:"p",className:"text-secondary mb-auto w-100 mt-3",style:{minHeight:"calc(2rem * 3)"}},r.a.createElement(j.a,{lines:3},this.props.content)))),r.a.createElement(y.a,{md:"3",className:"order-1 order-md-12 card-thumbnail-col"},r.a.createElement(Y,{image:this.props.thumbnail}),r.a.createElement(_,{statusColour:e,statusIcon:a,onStatusButtonClicked:this.onStatusButtonClicked,honestyMetric:this.props.honestyMetric,className:"m-3",shadow:!0}))),r.a.createElement(f.a,{className:"ripple-overlay"},r.a.createElement("div",{className:"ripple "+s,style:{background:e}}),r.a.createElement("div",{className:"ripple-overlay w-100"},r.a.createElement(f.a,null,r.a.createElement(y.a,{className:"d-flex flex-row justify-content-end"},r.a.createElement(D,{statusColour:e,statusIcon:a,onStatusButtonClicked:this.onStatusButtonClicked,honestyMetric:this.props.honestyMetric,className:"m-3"})),r.a.createElement("div",{className:"w-100"}),r.a.createElement(y.a,{className:"d-flex flex-row justify-content-end"},r.a.createElement(D,{statusColour:e,statusIcon:n,honestyMetric:this.props.userHonestyMetric,id:"userMetricStatusButton",className:"user-metric-status mx-3 "+i}),r.a.createElement(g.a,{placement:"right",target:"userMetricStatusButton"},"This is how users have rated this source.")),r.a.createElement("div",{className:"w-100"}),r.a.createElement(y.a,{className:"d-flex flex-row justify-content-end align-bottom"},r.a.createElement(p.a,{size:"md",color:"dark",className:"m-3 news-card-score-button rate-button "+l,onClick:this.showSurveyModal},r.a.createElement("div",{className:"w-100 h-100 align-self-center"},r.a.createElement(R.a,{icon:I.c,className:"mr-2"}),r.a.createElement("strong",null,"Rate"))),r.a.createElement(S.a,{isOpen:this.state.rateSurveyModal,toggle:this.showSurveyModal},r.a.createElement(N.a,{toggle:this.showSurveyModal},"Rate it yourself!"),r.a.createElement(C.a,null,r.a.createElement("iframe",{title:"User Rating Survey",src:"./rating-survey-embed.html",width:"600px",height:"400px"})),r.a.createElement(B.a,null,r.a.createElement(p.a,{color:"primary",onClick:this.showSurveyModal},"Done!")," "))))),r.a.createElement(v.a,{className:"ripple-overlay w-100 metric-breakdown-content "+c},r.a.createElement(E.a,null,r.a.createElement(k.a,{className:"news-card-title mb-0 w-100",tag:"h5"},"How was this rated?"),r.a.createElement(y.a,{md:"9",sm:"9",xs:"8"},r.a.createElement(f.a,{className:"mt-2"},u))))))}}]),t}(n.Component),A=a(78),F=a.n(A),J=a(79),T=a.n(J),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setState({articles:null}),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];fetch("https://honesty-matters-news.appspot.com/pleasegivemedatamylordplease",{method:"post"}).then(function(e){return e.json()}).then(function(a){for(var n=0;n<a.length;++n){var r={citationScore:a[n].citation_score,headline:decodeURI(a[n].headline).replace(/\\/g,""),mediaScore:a[n].media_score,opinionScore:a[n].opinion_score,rating:a[n].rating,thumbnail:a[n].thumbnail,timestamp:a[n].timestamp,url:a[n].url,authorReliability:a[n].author_reliability,siteReliability:a[n].site_reliability},s="";fetch(r.url).then(function(e){return e.text()}).then(function(e){s=T()(e).text}).catch(function(e){return console.error(e)}),r.content=s,t.push(r)}t.sort(function(e,t){return new Date(t.timestamp)>=new Date(e.timestamp)?1:-1}),e.setState({articles:t})}).catch(function(t){console.error(t),e.setState({articles:null})})}},{key:"render",value:function(){if(null===this.state)return null;var e=this.state.articles.map(function(e){var t=Math.round((e.rating+e.authorReliability+e.siteReliability)/3);return r.a.createElement(d.a,{className:"app-container py-3",key:e.url},r.a.createElement(z,{source:{name:F()(e.timestamp).format("MMMM Do YYYY, h:mm:ss a")},honestyMetric:t,userHonestyMetric:70,title:e.headline,content:e.content,thumbnail:{source:e.thumbnail,alt:"Thumbnail"},url:e.url,breakdownFactors:[{name:"Presence of Quotations",value:e.citationScore},{name:"Objectivity",value:e.opinionScore},{name:"Media Score",value:e.mediaScore},{name:"Author Reliability",value:e.authorReliability},{name:"Site Reliability",value:e.siteReliability}]}))});return r.a.createElement("div",{className:"App"},e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(172);o.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,a){e.exports=a(173)},86:function(e,t,a){},87:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.32b9f2a9.chunk.js.map